{% extends 'base.html' %}
{% block content %}
<div class="bg-dark text-white p-6 rounded-b-[2rem] relative z-10">
    <div class="flex justify-between items-start mb-6">
        <div>
            <p class="text-xs text-gray-300">Selamat Datang,</p>
            <h2 class="text-lg font-bold truncate w-48">{{ user.name }}</h2>
        </div>
        <div class="flex space-x-3">
            <button class="p-2 bg-white/10 rounded-full hover:bg-white/20"><i class="fas fa-search"></i></button>
            <a href="{{ url_for('logout') }}" class="p-2 bg-white/10 rounded-full hover:bg-white/20">
                <i class="fas fa-sign-out-alt"></i>
            </a>
        </div>
    </div>

    <div class="bg-white/10 backdrop-blur-md border border-white/10 p-4 rounded-2xl flex justify-between items-center">
        <div>
            <p class="text-xs text-gray-300 mb-1">Saldo Akun</p>
            <h3 class="text-xl font-bold">Rp {{ "{:,}".format(user.balance).replace(',', '.') }}</h3>
        </div>
        <div class="flex space-x-2">
            <button class="w-10 h-10 bg-primary rounded-full flex items-center justify-center shadow-lg text-dark"><i class="fas fa-wallet"></i></button>
            <button class="w-10 h-10 bg-lime-300 rounded-full flex items-center justify-center shadow-lg text-dark"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
</div>

<!-- <div class="px-6 -mt-6 relative z-20">
    <div class="bg-yellow-100 border border-yellow-200 p-4 rounded-xl flex justify-between items-center shadow-sm">
        <div>
            <p class="text-xs text-yellow-800 font-bold">Diskon Ongkir s/d 10rb</p>
            <a href="#" class="text-[10px] text-yellow-600 underline">Lihat Sekarang</a>
        </div>
        <i class="fas fa-times text-yellow-400 text-xs"></i>
    </div>
</div> -->

<div class="px-6 mt-6 pb-2">
    <h3 class="font-semibold text-gray-700 mb-3">Kategori</h3>
    <div class="flex justify-between space-x-2">
        {% for cat, icon, color in [('Sayuran', 'carrot', 'bg-green-100 text-green-600'), ('Buah', 'apple-whole', 'bg-red-100 text-red-600'), ('Daging', 'drumstick-bite', 'bg-orange-100 text-orange-600'), ('Susu', 'wine-bottle', 'bg-blue-100 text-blue-600')] %}
        <div class="flex flex-col items-center w-1/4">
            <div class="w-14 h-14 {{ color }} rounded-2xl flex items-center justify-center mb-2 shadow-sm">
                <i class="fas fa-{{ icon }} text-xl"></i>
            </div>
            <span class="text-xs text-gray-500">{{ cat }}</span>
        </div>
        {% endfor %}
    </div>
</div>

<div class="px-6 mt-6 pb-2">
    <div class="flex justify-between items-center mb-3">
        <h3 class="font-semibold text-gray-700">Produk Hari Ini</h3>
        <a href="{{ url_for('all_products') }}" class="text-primary text-xs font-bold hover:underline">Lihat Semua</a>
    </div>
    
    <div class="grid grid-cols-2 gap-4">
        {% for p in products[:4] %}
        <a href="{{ url_for('product_detail', pid=p.id) }}" class="bg-white p-3 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition">
            <div class="relative">
                <img src="{{ p.image }}" class="w-full h-32 object-cover rounded-xl mb-3">
                <button class="absolute top-2 right-2 bg-white/80 p-1.5 rounded-full text-gray-500 shadow-sm"><i class="far fa-heart text-xs"></i></button>
            </div>
            <h4 class="font-bold text-dark text-sm truncate">{{ p.name }}</h4>
            <p class="text-[10px] text-gray-500 truncate mb-2">{{ p.merchant_name }}</p>
            <div class="flex items-center text-[10px] text-yellow-500 mb-2">
                <i class="fas fa-star mr-1"></i> {{ p.rating }}
            </div>
            <div class="flex justify-between items-center">
                <span class="font-bold text-secondary text-sm">Rp {{ "{:,}".format(p.price).replace(',', '.') }}</span>
                <div class="w-6 h-6 bg-primary rounded-full flex items-center justify-center text-white text-xs"><i class="fas fa-plus"></i></div>
            </div>
        </a>
        {% endfor %}
    </div>
</div>

<div class="px-6 mt-6 pb-24">
    <h3 class="font-semibold text-gray-700 mb-4">Penjual Sekitarmu</h3>
    <div class="flex overflow-x-auto hide-scrollbar space-x-4 pb-4 pr-6">
        <div class="min-w-[200px] bg-white rounded-xl shadow-md border border-gray-100 p-3 flex flex-col">
            <img src="{{ url_for('static', filename='Dagang Buah.jpg') }}" class="h-24 w-full object-cover rounded-lg mb-2">
            <h4 class="font-bold text-sm text-dark">Toko Buah Pak Adi</h4>
            <div class="flex items-center text-xs text-yellow-500 mb-2">
                <i class="fas fa-star mr-1"></i> 4.5 (156)
            </div>
            <button class="w-full bg-lime-100 text-secondary text-xs font-bold py-2 rounded-lg mt-auto">Kunjungi</button>
        </div>
        <div class="min-w-[200px] bg-white rounded-xl shadow-md border border-gray-100 p-3 flex flex-col">
            <img src="{{ url_for('static', filename='Dagang Sayur.jpg') }}" class="h-24 w-full object-cover rounded-lg mb-2">
            <h4 class="font-bold text-sm text-dark">Toko Sayur Segar</h4>
            <div class="flex items-center text-xs text-yellow-500 mb-2">
                <i class="fas fa-star mr-1"></i> 4.8 (243)
            </div>
            <button class="w-full bg-lime-100 text-secondary text-xs font-bold py-2 rounded-lg mt-auto">Kunjungi</button>
        </div>
        <div class="min-w-[200px] bg-white rounded-xl shadow-md border border-gray-100 p-3 flex flex-col">
            <img src="{{ url_for('static', filename='Dagang Ayam.jpg') }}" class="h-24 w-full object-cover rounded-lg mb-2">
            <h4 class="font-bold text-sm text-dark">Toko Ayam Rejeki</h4>
            <div class="flex items-center text-xs text-yellow-500 mb-2">
                <i class="fas fa-star mr-1"></i> 4.3 (126)
            </div>
            <button class="w-full bg-lime-100 text-secondary text-xs font-bold py-2 rounded-lg mt-auto">Kunjungi</button>
        </div>
    </div>
</div>
{% endblock %}